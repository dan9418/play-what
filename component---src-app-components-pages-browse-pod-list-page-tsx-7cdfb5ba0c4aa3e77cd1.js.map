{"version":3,"file":"component---src-app-components-pages-browse-pod-list-page-tsx-7cdfb5ba0c4aa3e77cd1.js","mappings":"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","sources":["webpack://play-what/./src/app/components/pages/browse/pod-list.page.tsx","webpack://play-what/./src/app/components/shared/layout/ColumnManager.tsx","webpack://play-what/./src/core/Core.derived.ts","webpack://play-what/./src/core/Accidental.constants.ts","webpack://play-what/./src/core/Diatonic.constants.ts","webpack://play-what/./src/core/Note.utils.ts","webpack://play-what/./src/core/Pod.utils.ts","webpack://play-what/./src/core/primitives/Number.utils.ts"],"sourcesContent":["import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { PresetType } from \"../../../../core/Core.constants\";\r\nimport { AnyPodListPreset, getPreset } from \"../../../../core/Core.derived\";\r\nimport { INotePreset } from \"../../../../core/Note.constants\";\r\nimport { getRootedName } from \"../../../../core/Pod.utils\";\r\nimport ColumnManager from \"../../shared/layout/ColumnManager\";\r\nimport PageLayout from \"../../shared/layout/PageLayout\";\r\nimport { ModelPageProps } from \"../../shared/utils/PagePropsContext\";\r\n\r\nconst StyledPodlistPage = styled(PageLayout)``;\r\n\r\nconst PodListPage: React.FC<ModelPageProps> = (props) => {\r\n  const { presetType, presetId, rootId } = props.pageContext;\r\n\r\n  const podListPreset = getPreset(presetType, presetId) as AnyPodListPreset;\r\n  const rootNotePreset = getPreset(PresetType.Note, rootId) as INotePreset;\r\n\r\n  const title = getRootedName(podListPreset, rootNotePreset);\r\n\r\n  return (\r\n    <StyledPodlistPage title={title}>\r\n      <ColumnManager>\r\n        {/*<ColumnManager tablet={[\"300px\", \"auto\"]}>\r\n          <RootCard />\r\n          <DetailsCard\r\n            podListPreset={podListPreset}\r\n            rootNotePreset={rootNotePreset}\r\n          />\r\n        </ColumnManager>\r\n        {presetType === PresetType.Scale && (\r\n          <RomanNumeralsCard\r\n            podListPreset={podListPreset}\r\n            rootNotePreset={rootNotePreset}\r\n          />\r\n        )}\r\n        {presetType === PresetType.Scale && (\r\n          <ModeCard\r\n            podListPreset={podListPreset}\r\n            rootNotePreset={rootNotePreset}\r\n          />\r\n        )}\r\n        <FretboardCard\r\n          podListPreset={podListPreset}\r\n          rootNotePreset={rootNotePreset}\r\n        />\r\n        <RelatedCard\r\n          podListPreset={podListPreset}\r\n          rootNotePreset={rootNotePreset}\r\n        />*/}\r\n      </ColumnManager>\r\n    </StyledPodlistPage>\r\n  );\r\n};\r\n\r\nexport default PodListPage;\r\n","import React, { PropsWithChildren } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { MediaQuery } from \"../../../styles/breakpoint\";\r\n\r\ninterface IStyledColumnManagerProps {\r\n  $tablet?: string[];\r\n  $desktop?: string[];\r\n}\r\n\r\nexport const StyledColumnManager = styled.div<IStyledColumnManagerProps>`\r\n  display: grid;\r\n  gap: 16px;\r\n  grid-template-columns: 1fr;\r\n\r\n  ${({ $tablet }) =>\r\n    $tablet\r\n      ? `\r\n        ${MediaQuery.Tablet} {\r\n            grid-template-columns: ${$tablet.join(\" \")}\r\n        }\r\n    `\r\n      : \"\"}\r\n\r\n  ${({ $desktop }) =>\r\n    $desktop\r\n      ? `\r\n        ${MediaQuery.Desktop} {\r\n            grid-template-columns: ${$desktop.join(\" \")}\r\n        }\r\n    `\r\n      : ``}\r\n`;\r\n\r\nexport interface IColumnManagerProps extends PropsWithChildren {\r\n  tablet?: string[];\r\n  desktop?: string[];\r\n}\r\n\r\nconst ColumnManager: React.FC<IColumnManagerProps> = ({\r\n  tablet,\r\n  desktop,\r\n  children,\r\n}) => {\r\n  return (\r\n    <StyledColumnManager $tablet={tablet} $desktop={desktop}>\r\n      {children}\r\n    </StyledColumnManager>\r\n  );\r\n};\r\n\r\nexport default ColumnManager;\r\n","import {\r\n  ChordId,\r\n  CHORD_PRESETS,\r\n  CHORD_PRESET_MAP,\r\n  IChordPreset,\r\n} from \"./Chord.constants\";\r\nimport { PresetType } from \"./Core.constants\";\r\nimport { IntervalId, INTERVAL_PRESET_MAP } from \"./Interval.constants\";\r\nimport { NoteId, NOTE_PRESET_MAP } from \"./Note.constants\";\r\nimport {\r\n  IScalePreset,\r\n  ScaleId,\r\n  SCALE_PRESETS,\r\n  SCALE_PRESET_MAP,\r\n} from \"./Scale.constants\";\r\n\r\nexport type AnyPodListPreset = IChordPreset | IScalePreset;\r\n\r\nexport const POD_LIST_PRESETS: AnyPodListPreset[] = [\r\n  ...SCALE_PRESETS,\r\n  ...CHORD_PRESETS,\r\n];\r\n\r\nexport type PresetId = NoteId | IntervalId | ChordId | ScaleId;\r\n\r\nexport const getPreset = (presetType?: PresetType, presetId?: PresetId) => {\r\n  switch (presetType) {\r\n    case PresetType.Note:\r\n      return NOTE_PRESET_MAP.get(presetId as NoteId);\r\n    case PresetType.Interval:\r\n      return INTERVAL_PRESET_MAP.get(presetId as IntervalId);\r\n    case PresetType.Chord:\r\n      return CHORD_PRESET_MAP.get(presetId as ChordId);\r\n    case PresetType.Scale:\r\n      return SCALE_PRESET_MAP.get(presetId as ScaleId);\r\n  }\r\n};\r\n\r\n// export const logPresetJson = () => {\r\n//   console.log(\"pw-presets notes\", JSON.stringify(NOTE_PRESETS));\r\n//   console.log(\"pw-presets intervals\", JSON.stringify(INTERVAL_PRESETS));\r\n//   console.log(\"pw-presets chords\", JSON.stringify(CHORD_PRESETS));\r\n//   console.log(\"pw-presets scales\", JSON.stringify(SCALE_PRESETS));\r\n// };\r\n","import ArrayUtils from \"./primitives/Array.utils\";\r\nimport { IPreset, PresetMap } from \"./Core.constants\";\r\n\r\nexport enum AccidentalId {\r\n  DoubleFlat = \"double-flat\",\r\n  Flat = \"flat\",\r\n  Natural = \"natural\",\r\n  Sharp = \"sharp\",\r\n  DoubleSharp = \"double-sharp\",\r\n}\r\n\r\nexport interface IAccidentalPreset extends IPreset<AccidentalId> {\r\n  symbol: string;\r\n  offset: number;\r\n}\r\n\r\nexport const ACCIDENTAL_PRESET_MAP: PresetMap<AccidentalId, IAccidentalPreset> =\r\n  new Map([\r\n    [\r\n      AccidentalId.DoubleFlat,\r\n      {\r\n        presetId: AccidentalId.DoubleFlat,\r\n        name: \"Double Flat\",\r\n        symbol: \"bb\",\r\n        offset: -2,\r\n      },\r\n    ],\r\n    [\r\n      AccidentalId.Flat,\r\n      {\r\n        presetId: AccidentalId.Flat,\r\n        name: \"Flat\",\r\n        symbol: \"b\",\r\n        offset: -1,\r\n      },\r\n    ],\r\n    [\r\n      AccidentalId.Natural,\r\n      {\r\n        presetId: AccidentalId.Natural,\r\n        name: \"Natural\",\r\n        symbol: \"â™®\",\r\n        offset: 0,\r\n      },\r\n    ],\r\n    [\r\n      AccidentalId.Sharp,\r\n      {\r\n        presetId: AccidentalId.Sharp,\r\n        name: \"Sharp\",\r\n        symbol: \"#\",\r\n        offset: 1,\r\n      },\r\n    ],\r\n    [\r\n      AccidentalId.DoubleSharp,\r\n      {\r\n        presetId: AccidentalId.DoubleSharp,\r\n        name: \"Double Sharp\",\r\n        symbol: \"##\",\r\n        offset: 2,\r\n      },\r\n    ],\r\n  ]);\r\n\r\nexport const ACCIDENTAL_PRESETS = ArrayUtils.mapToArray(ACCIDENTAL_PRESET_MAP);\r\n","import { PresetMap } from \"./Core.constants\";\r\nimport { ROOT_DEGREE } from \"./Degree.constants\";\r\nimport { ROOT_PITCH } from \"./Pitch.constants\";\r\nimport { IPodPreset } from \"./Pod.constants\";\r\nimport ArrayUtils from \"./primitives/Array.utils\";\r\n\r\nexport enum DiatonicId {\r\n  Tonic = \"tonic\",\r\n  Supertonic = \"supertonic\",\r\n  Mediant = \"mediant\",\r\n  Subdominant = \"submediant\",\r\n  Dominant = \"dominant\",\r\n  Submediant = \"submediant\",\r\n  Subtonic = \"subtonic\",\r\n}\r\n\r\nexport interface IDiatonicPreset extends IPodPreset<DiatonicId> {}\r\n\r\nexport const DIATONIC_PRESET_MAP: PresetMap<DiatonicId, IDiatonicPreset> =\r\n  new Map([\r\n    [\r\n      DiatonicId.Tonic,\r\n      {\r\n        presetId: DiatonicId.Tonic,\r\n        name: \"Tonic\",\r\n        pod: [0, 0],\r\n      },\r\n    ],\r\n    [\r\n      DiatonicId.Supertonic,\r\n      {\r\n        presetId: DiatonicId.Supertonic,\r\n        name: \"Supertonic\",\r\n        pod: [2, 1],\r\n      },\r\n    ],\r\n    [\r\n      DiatonicId.Mediant,\r\n      {\r\n        presetId: DiatonicId.Mediant,\r\n        name: \"Mediant\",\r\n        pod: [4, 2],\r\n      },\r\n    ],\r\n    [\r\n      DiatonicId.Subdominant,\r\n      {\r\n        presetId: DiatonicId.Subdominant,\r\n        name: \"Subdominant\",\r\n        pod: [5, 3],\r\n      },\r\n    ],\r\n    [\r\n      DiatonicId.Dominant,\r\n      {\r\n        presetId: DiatonicId.Dominant,\r\n        name: \"Dominant\",\r\n        pod: [7, 4],\r\n      },\r\n    ],\r\n    [\r\n      DiatonicId.Submediant,\r\n      {\r\n        presetId: DiatonicId.Submediant,\r\n        name: \"Submediant\",\r\n        pod: [9, 5],\r\n      },\r\n    ],\r\n    [\r\n      DiatonicId.Subtonic,\r\n      {\r\n        presetId: DiatonicId.Subtonic,\r\n        name: \"Subtonic\",\r\n        pod: [11, 6],\r\n      },\r\n    ],\r\n  ]);\r\n\r\nexport const DIATONIC_PRESETS = ArrayUtils.mapToArray(DIATONIC_PRESET_MAP);\r\n\r\nexport const ROOT_SCALE = DIATONIC_PRESETS.map((preset, i) => [\r\n  ROOT_PITCH + preset.pod[0],\r\n  ROOT_DEGREE + preset.pod[1],\r\n]);\r\n","import {\r\n  AccidentalId,\r\n  ACCIDENTAL_PRESET_MAP,\r\n  IAccidentalPreset,\r\n} from \"./Accidental.constants\";\r\nimport { DegreeId, DEGREE_PRESETS } from \"./Degree.constants\";\r\nimport { ROOT_SCALE } from \"./Diatonic.constants\";\r\nimport { getFrequency as getFrequencyFromPitch } from \"./Frequency.utils\";\r\nimport {\r\n  INotePreset,\r\n  NoteId,\r\n  NOTE_PRESETS,\r\n  NOTE_PRESET_MAP,\r\n} from \"./Note.constants\";\r\nimport { IPod, MAX_POD } from \"./Pod.constants\";\r\nimport { arePodsEqual, getDegree, reducePod } from \"./Pod.utils\";\r\nimport NumberUtils from \"./primitives/Number.utils\";\r\n\r\ninterface INoteNameOptions {\r\n  includeOctave?: boolean;\r\n}\r\n\r\ninterface INoteNameParts {\r\n  spelling: string;\r\n  accidental: string;\r\n  octave: number;\r\n}\r\n\r\nexport const getNoteFromPod = (pod: IPod) => {\r\n  return NOTE_PRESETS.find((note) => arePodsEqual(note, pod));\r\n};\r\n\r\nexport const getNoteWithOctave = (noteId: NoteId, octave: number): IPod => {\r\n  const notePreset = NOTE_PRESET_MAP.get(noteId) as INotePreset;\r\n  return [\r\n    (octave - 4) * 12 + NumberUtils.modulo(notePreset.pod[0], 12),\r\n    notePreset.pod[1],\r\n  ];\r\n};\r\n\r\n// export const  fromId = (presetId: string, octave = 4) => {\r\n//   let sharps = (presetId.match(/-sharp/g) || []).length;\r\n//   let flats = (presetId.match(/-flat/g) || []).length;\r\n//   const nativeNoteId = presetId.slice(0, 1) as NoteId;\r\n//   const nativePod = (NOTE_PRESET_MAP.get(nativeNoteId) as IModelConfig).value;\r\n//   const octaveBasePitch =\r\n//     typeof octave === \"undefined\" ? 0 : (octave - 4) * 12;\r\n//   const pitch = octaveBasePitch + nativePod[0] + sharps - flats;\r\n//   const pod = [pitch, nativePod[1]] as IPod;\r\n//   //const pod = [NumberUtils.modulo(nativePod[0] + sharps - flats, 12), nativePod[1]] as IPod;\r\n//   const note = new Note(pod);\r\n//   note.modelType = ModelType.Pod;\r\n//   note.presetType = PresetType.Note;\r\n//   note.presetId = presetId as any;\r\n//   note.name = getName();\r\n//   note.pod = pod as IPod;\r\n//   // @ts-ignore TODO\r\n//   note.value = note.pod;\r\n//   return note;\r\n// };\r\n\r\nexport const getAccidentalOffset = (pod: IPod): number => {\r\n  const [p, d] = reducePod(pod);\r\n\r\n  let offset = p - ROOT_SCALE[d][0];\r\n\r\n  // If offset spans more than half an octave, it's going the wrong way\r\n  // TODO need to formally confirm this\r\n  if (offset > 5) offset = offset - 12;\r\n  if (offset < -5) offset = offset + 12;\r\n\r\n  // Examples\r\n  // if (d === 0 && offset === 11) offset = offset - 12;\r\n  // if (d === 0 && offset === 10) offset = offset - 12;\r\n  // if (d === 0 && offset === 9) offset = offset - 12;\r\n  // if (d === 1 && offset === 9) offset = offset - 12;\r\n  // if (d === 1 && offset === 8) offset = offset - 12;\r\n  // if (d === 5 && offset === -9) offset = offset + 12;\r\n  // if (d === 6 && offset === -11) offset = offset + 12;\r\n  // if (d === 6 && offset === -10) offset = offset + 12;\r\n  // if (d === 6 && offset === -9) offset = offset + 12;\r\n  //console.log(`${p} - ${ROOT_SCALE[d][0]} = ${offset}, d = ${d}`);\r\n\r\n  return offset;\r\n};\r\n\r\nexport const getAccidentalString = (pod: IPod): string => {\r\n  const offset = getAccidentalOffset(pod);\r\n  if (offset > 0) {\r\n    return (\r\n      ACCIDENTAL_PRESET_MAP.get(AccidentalId.Sharp) as IAccidentalPreset\r\n    ).symbol.repeat(offset);\r\n  } else if (offset < 0) {\r\n    return (\r\n      ACCIDENTAL_PRESET_MAP.get(AccidentalId.Flat) as IAccidentalPreset\r\n    ).symbol.repeat(-offset);\r\n  }\r\n  return \"\";\r\n};\r\n\r\nexport const getPitch = (pod: IPod): number => {\r\n  return pod[0];\r\n};\r\n\r\nexport const getPitchClass = (pod: IPod): number => {\r\n  return NumberUtils.modulo(getPitch(pod), MAX_POD[0]);\r\n};\r\n\r\nexport const getOctave = (pod: IPod): number => {\r\n  const midi = true;\r\n  const raw = Math.floor(getPitch(pod) / 12);\r\n  return midi ? raw + 4 : raw;\r\n};\r\n\r\nexport const getDegreeId = (pod: IPod): DegreeId => {\r\n  const degree = getDegree(pod);\r\n  return DEGREE_PRESETS[degree].id;\r\n};\r\n\r\nexport const getSpelling = (pod: IPod): string => {\r\n  return getDegreeId(pod);\r\n};\r\n\r\nexport const getNameParts = (pod: IPod): INoteNameParts => {\r\n  const spelling = getSpelling(pod);\r\n  const accidental = getAccidentalString(pod);\r\n  const octave = getOctave(pod);\r\n  return { spelling, accidental, octave };\r\n};\r\n\r\nexport const getName = (pod: IPod, options: INoteNameOptions = {}): string => {\r\n  const { spelling, accidental, octave } = getNameParts(pod);\r\n\r\n  const o = options.includeOctave ? octave : \"\";\r\n  return `${spelling}${accidental}${o}`;\r\n};\r\n\r\nexport const getFrequency = (pod: IPod, format = false) => {\r\n  const f = getFrequencyFromPitch(getPitch(pod));\r\n  return format ? `${f.toFixed(0)} Hz` : f;\r\n};\r\n","import { CHORD_PRESETS } from \"./Chord.constants\";\r\nimport { AnyPodListPreset } from \"./Core.derived\";\r\nimport { INotePreset } from \"./Note.constants\";\r\nimport { getName } from \"./Note.utils\";\r\nimport { IPod, MAX_POD } from \"./Pod.constants\";\r\nimport NumberUtils from \"./primitives/Number.utils\";\r\nimport { SCALE_PRESETS } from \"./Scale.constants\";\r\n\r\n// Search\r\n\r\nconst isPodAtPitch = (\r\n  pod: IPod,\r\n  p: number,\r\n  matchOctave = false\r\n): IPod | null => {\r\n  const pitchOffset = 0;\r\n  const target = p - pitchOffset;\r\n  let a = pod[0];\r\n  let b = target;\r\n  if (!matchOctave) {\r\n    a = NumberUtils.modulo(a, 12);\r\n    b = NumberUtils.modulo(b, 12);\r\n  }\r\n  return a === b ? pod : null;\r\n};\r\n\r\nexport const getIndexOfPodAtPitch = (\r\n  A: IPod[],\r\n  p: number,\r\n  matchOctave: boolean\r\n): number | null => {\r\n  const pod = A.findIndex((a) => isPodAtPitch(a, p, matchOctave));\r\n  return pod !== -1 ? pod : null;\r\n};\r\n\r\n/*static sort = (podList: IPod[]) => {\r\n    return podList.sort((a, b) => {\r\n        if (a[0] < b[0]) return -1;\r\n        else if (a[0] > b[0]) return 1;\r\n        else {\r\n            if (a[1] < b[1]) return -1;\r\n            else if (a[1] > b[1]) return 1;\r\n            else return 0;\r\n        }\r\n    });\r\n}*/\r\n\r\nexport const addPods = (a: IPod, b: IPod): IPod => {\r\n  const p = a[0] + b[0];\r\n  const d = a[1] + b[1];\r\n  const result: IPod = [p, d];\r\n  return result;\r\n};\r\n\r\nexport const subtractPods = (a: IPod, b: IPod): IPod => {\r\n  const p = a[0] - b[0];\r\n  const d = a[1] - b[1];\r\n  const result: IPod = [p, d];\r\n  return result;\r\n};\r\n\r\nexport const addPodList = (a: IPod, B: IPod[]): IPod[] => {\r\n  const result = B.map((b) => addPods(a, b));\r\n  return result;\r\n};\r\n\r\nexport const reducePod = (a: IPod, max = MAX_POD): IPod => {\r\n  const p = NumberUtils.modulo(a[0], max[0]);\r\n  const d = NumberUtils.modulo(a[1], max[1]);\r\n  return [p, d];\r\n};\r\n\r\nexport const arePodsEqual = (a: IPod, b: IPod): boolean => {\r\n  if (!a || !b || a.length !== 2 || b.length !== 2) return false;\r\n  return a[0] === b[0] && a[1] === b[1];\r\n};\r\n\r\nexport const reducePodList = (A: IPod[]): IPod[] => {\r\n  return A.map((a) => reducePod(a));\r\n};\r\n\r\nexport const arePodListsEqual = (A: IPod[], B: IPod[]): boolean => {\r\n  if (!A || !B || A.length !== B.length) return false;\r\n  for (let i = 0; i < A.length; i++) {\r\n    const a = A[i];\r\n    const b = B[i];\r\n    if (!arePodsEqual(a, b)) return false;\r\n  }\r\n  return true;\r\n};\r\n\r\nexport const listContainsSubset = (\r\n  podList: IPod[],\r\n  subset: IPod[]\r\n): boolean => {\r\n  for (let i = 0; i < subset.length; i++) {\r\n    if (!podList.find((x) => x[0] === subset[i][0] && x[1] === subset[i][1]))\r\n      return false;\r\n  }\r\n  return true;\r\n};\r\n\r\nexport const getDegree = (pod: IPod) => {\r\n  return NumberUtils.modulo(pod[1], MAX_POD[1]);\r\n};\r\n\r\nexport const getShortName = (str) =>\r\n  str\r\n    .replace(\"Major\", \"Maj\")\r\n    .replace(\"Minor\", \"Min\")\r\n    .replace(\"Augmented\", \"Aug\")\r\n    .replace(\"Diminished\", \"Dim\")\r\n    .replace(\"Suspended\", \"Sus\")\r\n    .replace(\"Dominant\", \"Dom\")\r\n    .replace(\"Pentatonic\", \"Pent\")\r\n    .replace(\"st\", \"\")\r\n    .replace(\"nd\", \"\")\r\n    .replace(\"rd\", \"\")\r\n    .replace(\"th\", \"\");\r\n\r\nexport const getRootedName = (\r\n  podListPreset: AnyPodListPreset,\r\n  rootNotePreset?: INotePreset\r\n) => {\r\n  return `${rootNotePreset ? `${getName(rootNotePreset.pod)} ` : \"\"}${\r\n    podListPreset.name\r\n  }`;\r\n};\r\n\r\nexport const isInSuperset = (intervalPods: IPod[], superset: IPod[]) => {\r\n  if (superset.length <= intervalPods.length) return false;\r\n  return listContainsSubset(superset, intervalPods);\r\n};\r\n\r\nexport const containsSubset = (intervalPods: IPod[], subset: IPod[]) => {\r\n  if (subset.length >= intervalPods.length) return false;\r\n  return listContainsSubset(intervalPods, subset);\r\n};\r\n\r\nexport const getSubchords = (intervalPods: IPod[]) => {\r\n  return CHORD_PRESETS.filter((preset) =>\r\n    containsSubset(intervalPods, preset.value)\r\n  );\r\n};\r\n\r\nexport const getSuperchords = (intervalPods: IPod[]) => {\r\n  return CHORD_PRESETS.filter((preset) =>\r\n    isInSuperset(intervalPods, preset.value)\r\n  );\r\n};\r\n\r\nexport const getSubscales = (intervalPods: IPod[]) => {\r\n  return SCALE_PRESETS.filter((preset) =>\r\n    containsSubset(intervalPods, preset.value)\r\n  );\r\n};\r\n\r\nexport const getSuperscales = (intervalPods: IPod[]) => {\r\n  return SCALE_PRESETS.filter((preset) =>\r\n    isInSuperset(intervalPods, preset.value)\r\n  );\r\n};\r\n\r\nexport const getAllRelated = (intervalPods: IPod[]) => {\r\n  return [\r\n    ...getSubchords(intervalPods),\r\n    ...getSubscales(intervalPods),\r\n    ...getSuperchords(intervalPods),\r\n    ...getSuperscales(intervalPods),\r\n  ];\r\n};\r\n\r\n// applyRoot(root: IPod) {\r\n//   let notePods;\r\n//   try {\r\n//     notePods = this.intervalPods.map((ivl) => addPods(root, ivl));\r\n//   } catch (e) {\r\n//     console.error(e);\r\n//     throw new Error(\"Unable to apply root\");\r\n//   }\r\n//   this.root = root;\r\n//   this.notePods = notePods;\r\n//   this.name = `${\"ROOT\"} ${this.name}`;\r\n//   return this;\r\n// }\r\n\r\nexport const tryGetPodPairAtPitch = (\r\n  intervalPods: IPod[],\r\n  notePods: IPod[],\r\n  noteIndex: number\r\n): [IPod, IPod] | [undefined, undefined] => {\r\n  if (!notePods) return [undefined, undefined];\r\n\r\n  const index = getIndexOfPodAtPitch(notePods, noteIndex, false);\r\n\r\n  if (index == null) return [undefined, undefined];\r\n\r\n  return [intervalPods[index], (notePods as IPod[])[index]];\r\n};\r\n\r\nexport const getNotePods = (\r\n  rootPod: IPod,\r\n  intervalPods: IPod[],\r\n  octave = 4\r\n): IPod[] => {\r\n  const notePods = intervalPods.map((ivl) => {\r\n    const notePod = addPods(rootPod, ivl);\r\n    return [\r\n      (octave - 4) * 12 + NumberUtils.modulo(notePod[0], 12),\r\n      notePod[1],\r\n    ] as IPod;\r\n  });\r\n  return notePods;\r\n};\r\n","const ROMAN_NUMERAL = {\r\n\tM: 1000,\r\n\tCM: 900,\r\n\tD: 500,\r\n\tCD: 400,\r\n\tC: 100,\r\n\tXC: 90,\r\n\tL: 50,\r\n\tXL: 40,\r\n\tX: 10,\r\n\tIX: 9,\r\n\tV: 5,\r\n\tIV: 4,\r\n\tI: 1\r\n} as const;\r\n\r\nconst modulo = (a: number, b: number): number => {\r\n\treturn ((a % b) + b) % b;\r\n}\r\n\r\nconst moduloSum = (a: number, b: number, divisor: number): number => {\r\n\tconst offset = 0;\r\n\tconst subtraction = false;\r\n\tconst dividend = (subtraction) ? ((a - offset) - (b - offset)) : ((a - offset) + (b - offset));\r\n\treturn modulo(dividend, divisor) + offset;\r\n};\r\n\r\nconst romanize = (n: number): string => {\r\n\tlet str = '';\r\n\tfor (const i of Object.keys(ROMAN_NUMERAL)) {\r\n\t\tvar q = Math.floor(n / ROMAN_NUMERAL[i]);\r\n\t\tn -= q * ROMAN_NUMERAL[i];\r\n\t\tstr += i.repeat(q);\r\n\t\tif (n === 0) return str;\r\n\t}\r\n\treturn str;\r\n}\r\n\r\nexport default {\r\n\tmodulo,\r\n\tmoduloSum,\r\n\tromanize\r\n};\r\n"],"names":["StyledPodlistPage","styled","PageLayout","displayName","componentId","props","presetType","presetId","rootId","pageContext","podListPreset","getPreset","rootNotePreset","PresetType","title","getRootedName","React","ColumnManager","StyledColumnManager","_ref","$tablet","MediaQuery","join","_ref2","$desktop","_ref3","tablet","desktop","children","POD_LIST_PRESETS","SCALE_PRESETS","CHORD_PRESETS","NOTE_PRESET_MAP","INTERVAL_PRESET_MAP","CHORD_PRESET_MAP","SCALE_PRESET_MAP","AccidentalId","ACCIDENTAL_PRESET_MAP","Map","DoubleFlat","name","symbol","offset","Flat","Natural","Sharp","DoubleSharp","ArrayUtils","DiatonicId","DIATONIC_PRESET_MAP","Tonic","pod","Supertonic","Mediant","Subdominant","Dominant","Submediant","Subtonic","ROOT_SCALE","map","preset","i","ROOT_PITCH","ROOT_DEGREE","getAccidentalString","p","d","reducePod","getAccidentalOffset","get","repeat","getPitch","getSpelling","degree","getDegree","DEGREE_PRESETS","id","getDegreeId","getNameParts","spelling","accidental","octave","raw","Math","floor","getOctave","getName","options","includeOctave","addPods","a","b","max","MAX_POD","NumberUtils","ROMAN_NUMERAL","M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I","modulo","moduloSum","divisor","romanize","n","str","Object","keys","q"],"sourceRoot":""}