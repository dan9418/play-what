"use strict";(self.webpackChunkplay_what=self.webpackChunkplay_what||[]).push([[562],{3457:function(e,t,r){r.r(t),r.d(t,{default:function(){return T}});var a=r(7294),n=r(8804),o=r(2118),c=r(9531),l=r(8930),s=r(1883),i=r(1668),d=(r(7207),r(5785)),u=r(6057),h=r(7318),p=r(1693),m=r(44);const f=(e,t,r)=>{switch(e){case u.BY.Chord:return(r||"")+" "+t+" Chord";case u.BY.Scale:return(r||"")+" "+t+" Scale";default:return(r||"")+" "+t}},g=[{text:"Browse",to:"/browse",keywords:["all","chord","scale","browse"]},{text:"All Chords",to:(0,h.D)(u.BY.Chord),keywords:["all","chord"]},{text:"All Scales",to:(0,h.D)(u.BY.Scale),keywords:["all","scale","mode"]}],b=/\b[A-G](b|\sflat|\ssharp)*\b/gi,y=/\b[A-G]b\b/gi,x=(e,t)=>{const r=(e=>{const t=[];return e.match(/maj|major/)&&t.push(u.Vp.Major),e.match(/min|minor/)&&t.push(u.Vp.Minor),e.match(/triad|chord/)&&t.push(u.Vp.Triad),e.match(/aug|augmented/)&&t.push(u.Vp.Augmented),e.match(/dim|diminished/)&&t.push(u.Vp.Diminished),e.match(/sus|suspended/)&&t.push(u.Vp.Suspended),e.match(/dom|dominant/)&&t.push(u.Vp.Dominant),e.match(/pent|pentatonic/)&&t.push(u.Vp.Pentatonic),e.match(/hex|hexatonic/)&&t.push(u.Vp.Hexatonic),e.match(/oct|octatonic/)&&t.push(u.Vp.Octatonic),e.match(/dia|diatonic/)&&t.push(u.Vp.Diatonic),e.match(/2|2nd|two|second/)&&t.push(u.Vp.Second),e.match(/3|3rd|three|third/)&&t.push(u.Vp.Third),e.match(/4|4th|four|fourth/)&&t.push(u.Vp.Fourth),e.match(/5|5th|five|fifth/)&&t.push(u.Vp.Fifth),e.match(/6|6th|six|sixth/)&&t.push(u.Vp.Sixth),e.match(/7|7th|seven|seventh/)&&t.push(u.Vp.Seventh),e.match(/beb|bebop/)&&t.push(u.Vp.Bebop),e.match(/blu|blues/)&&t.push(u.Vp.Blues),e.match(/mel|melodic|minor/)&&t.push(u.Vp.MelodicMode),e.match(/harm|harmonic|minor/)&&t.push(u.Vp.HarmonicMode),t})(e);return p.cI.filter((e=>!(t&&e.modelType!==t))).map((t=>((e,t,r)=>{let a=0;return t.match(e.name.toLowerCase())&&(a=100),e.name.toLowerCase().match(new RegExp(t.split(" ").join("|"),"gi"))&&(a+=50),a+=r.filter((t=>e.tags.some((e=>e===t)))).length,{...e,score:a}})(t,e,r)))},v=e=>{if(!e)return g;const t=(e=>e.trim().toLowerCase().replaceAll("#","-sharp").replaceAll(y,(e=>e.charAt(0)+"-flat")).replaceAll(/[^A-Z1-9]/gi," "))(e),r=(e=>{const t=e.match(b);if(!t||!t.length)return;const r=t[0];return(0,m.k)(r," ","-")})(t),a=(e=>e.match("chord")?u.BY.Chord:e.match("scale")?u.BY.Scale:void 0)(t),n=((e,t)=>e.filter((e=>t||e.score)).sort(((e,t)=>t.score-e.score)))(x(t,a),r),o=((e,t)=>e.map((e=>{const r=t?p.nq.get(t).name:void 0;return{text:f(e.modelType,e.name,r),to:(0,h.D)(e.modelType,e.modelId,t),aliases:e.aliases,modelType:e.modelType}})))(n,r),c=(e=>{const t=[];for(let r=0;r<e.length;r++){const a=e[r];t.push(a),a.aliases&&a.aliases.forEach((e=>t.push({to:a.to,text:e+" "+(a.modelType===u.BY.Chord?" Chord":" Scale")})))}return t})(o),l=g.filter((e=>function(e,t){return void 0===e&&(e=""),t.some((t=>e.match(new RegExp(t,"gi"))))}(t,e.keywords)));return[].concat((0,d.Z)(c),(0,d.Z)(l))};var w=r(8993);const S=n.default.div.withConfig({displayName:"FilterList__StyledFilterList",componentId:"sc-8wtsdd-0"})(["border:1px solid ",";border-radius:8px;padding:8px;margin-bottom:16px;.top{display:flex;align-items:center;justify-content:space-between;}ul{display:flex;flex-wrap:wrap;align-items:center;justify-content:center;gap:8px;> li{margin:0  !important;list-style-type:none !important;}button{background-color:",";;border:1px solid ",";;color:",";padding:4px 8px;font-size:80%;:hover{background-color:",";}&.active{color:",";;background-color:",";}:disabled{color:",";background-color:",";cursor:not-allowed;}}}"],(e=>e.theme.action.interactive),(e=>{let{theme:t}=e;return t.utils.transparent}),(e=>e.theme.action.interactive),(e=>e.theme.action.interactive),(e=>{let{theme:t}=e;return t.utils.hoverDark}),(e=>{let{theme:t}=e;return t.text.inverted}),(e=>e.theme.action.interactive),(e=>{let{theme:t}=e;return t.text.inverted}),(e=>e.theme.text.secondary));var E=e=>{let{tags:t,availableTags:r,selectedTags:n,setSelectedTags:o}=e;return a.createElement(S,null,!1,a.createElement("ul",null,t.map((e=>a.createElement("li",{key:e},a.createElement(w.Z,{onClick:()=>(e=>{n.includes(e)?o(n.filter((t=>t!==e))):o([].concat((0,d.Z)(n),[e]))})(e),className:n.includes(e)?"active":"",disabled:!r.includes(e)},e))))))},k=r(4595);const C=n.default.ul.withConfig({displayName:"SearchResultsCard__StyledSearchResultsList",componentId:"sc-jtbm82-0"})(["  font-size:110%;li a{padding:4px 0;display:block;&:focus,&:hover{padding:8px;background-color:",";color:white;border-radius:8px;}}"],(e=>e.theme.action.interactive)),V=[];var _=e=>{let{resultsRef:t,query:r}=e;const{0:n,1:o}=(0,a.useState)(!1),{0:c,1:l}=(0,a.useState)([]);let d=v(r);const u=new Set;V.forEach((e=>{e.to.includes("root")||e.tags.forEach((e=>u.add(e)))}));const h=i.Z.setToArray(u)||[];return a.createElement(k.ZP,{title:r?"Results":"Popular Pages",action:null},n&&a.createElement(E,{tags:h,availableTags:[],selectedTags:c,setSelectedTags:l}),a.createElement(C,null,d.map(((e,r)=>a.createElement("li",{key:e.text},a.createElement(s.rU,{id:"search-result="+r,to:e.to,ref:0===r?t:void 0,onKeyDown:t=>{if(t.preventDefault(),"Enter"===t.key&&(0,s.c4)(e.to),"ArrowDown"===t.key){const e=document.getElementById("search-result="+(r+1));e&&e.focus()}if("ArrowUp"===t.key){const e=document.getElementById("search-result="+(r-1));e&&e.focus()}}},e.text))))))};(0,n.default)(w.Z).withConfig({displayName:"SearchResultsCard___StyledButtonInput",componentId:"sc-jtbm82-1"})(["color:",";background-color:transparent;text-decoration:underline;&.active{color:white;background-color:",";}"],(e=>e.theme.action.interactive),(e=>e.theme.action.interactive));const B=(0,n.default)(c.Z).withConfig({displayName:"searchpage__StyledSearchPage",componentId:"sc-fipgqr-0"})([".search-bar{margin:32px auto;}"]);var T=()=>{const[e]=(0,o.useQueryParam)("query"),{0:t,1:r}=(0,a.useState)(e||""),n=(0,a.useRef)(),c=(0,a.useRef)();return(0,a.useEffect)((()=>{const t=(e?c:n).current;t&&t.focus()}),[]),a.createElement(B,{title:"Search"},a.createElement(l.Z,{searchRef:n,query:t,setQuery:r}),a.createElement(_,{resultsRef:c,query:t}))}},8930:function(e,t,r){r.d(t,{_:function(){return o}});var a=r(1883),n=r(7294);const o=r(8804).default.form.withConfig({displayName:"SearchBar__StyledSearchBar",componentId:"sc-1je05sb-0"})(["width:100%;.search-bar{width:100%;max-width:512px;display:grid;grid-template-columns:1fr auto;input,button{padding:8px 8px;border-radius:8px;border:1px solid ",";}input{border-radius:8px 0 0 8px;border-right:none;}button{border-radius:0 8px 8px 0;cursor:pointer;color:white;font-weight:bold;background-color:",";&:hover{background-color:",";}border-left:none;padding:8px 16px;display:flex;align-items:center;justify-content:center;}}"],(e=>e.theme.utils.border),(e=>e.theme.action.interactive),(e=>e.theme.action.active));t.Z=e=>{let{searchRef:t,query:r,setQuery:c,placeholder:l}=e;const{0:s,1:i}=(0,n.useState)(""),d=void 0===r?s:r,u=void 0===c?i:c;return n.createElement(o,{role:"search",onSubmit:e=>{e.preventDefault();const t=e.target.elements.query.value,r=new URLSearchParams({query:t}),n="/search/"+(r?"?"+r.toString():"");return(0,a.c4)(n),!1}},n.createElement("div",{className:"search-bar"},n.createElement("input",{type:"search",id:"site-search",name:"query",ref:t,onChange:e=>{u(e.target.value)},value:d,placeholder:l||"Search the site..."}),n.createElement("button",{type:"submit"},"Search")))}},4595:function(e,t,r){r.d(t,{Ol:function(){return o},rg:function(){return n}});var a=r(7294);const n=r(8804).default.div.withConfig({displayName:"Card__StyledCard",componentId:"sc-c2yhvp-0"})(["background:",";width:100%;border-radius:16px;padding:16px;.header{margin-bottom:16px;display:flex;align-items:center;gap:8px;justify-content:space-between;}"],(e=>e.theme.surface.card)),o=e=>{let{title:t,level:r=2,action:n=null}=e;const o="h"+r;return a.createElement("div",{className:"header"},a.createElement(o,null,t),n)};t.ZP=e=>{let{title:t,subtitle:r,action:c,children:l,level:s=1,...i}=e;return a.createElement(n,i,t&&a.createElement(o,{title:t,action:c,level:s}),r&&a.createElement(o,{title:r,level:s+1}),l)}},7318:function(e,t,r){r.d(t,{D:function(){return a}});const a=(e,t,r)=>"/browse/"+e+(t?"/"+t:"")+(r?"/root/"+r:"")+"/"}}]);
//# sourceMappingURL=component---src-components-pages-search-page-tsx-a64943de7eec35db9b90.js.map