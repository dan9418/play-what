{"version":3,"file":"3e43f7321083b6bcdc818fdbe3152735cfcd5687-9e7ca20eaf5ffbb415d3.js","mappings":"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","sources":["webpack://play-what/./src/app/components/pages/browse/cards/CollectionTable.tsx","webpack://play-what/./src/app/components/shared/layout/ColumnManager.tsx","webpack://play-what/./src/app/components/shared/ui/Card.tsx","webpack://play-what/./src/app/components/shared/ui/Table.tsx","webpack://play-what/./src/core/Frequency.utils.ts","webpack://play-what/./src/core/IntervalQuality.constants.ts","webpack://play-what/./src/core/Interval.utils.ts","webpack://play-what/./src/core/Accidental.constants.ts","webpack://play-what/./src/core/Diatonic.constants.ts","webpack://play-what/./src/core/Note.utils.ts","webpack://play-what/./src/core/Pod.utils.ts","webpack://play-what/./src/core/primitives/Number.utils.ts"],"sourcesContent":["import React from \"react\";\r\nimport { css } from \"styled-components\";\r\nimport { PresetType } from \"../../../../../core/Core.constants\";\r\nimport { AnyPodListPreset } from \"../../../../../core/Core.derived\";\r\nimport { getName as getIntervalName } from \"../../../../../core/Interval.utils\";\r\nimport { INotePreset, NoteId } from \"../../../../../core/Note.constants\";\r\nimport { getName as getNoteName } from \"../../../../../core/Note.utils\";\r\nimport { IPod } from \"../../../../../core/Pod.constants\";\r\nimport { addPods, getRootedName } from \"../../../../../core/Pod.utils\";\r\nimport { getModelRoute } from \"../../../../../core/Routing.utils\";\r\nimport { Breakpoint, MediaQuery } from \"../../../../styles/breakpoint\";\r\nimport { Table } from \"../../../shared/ui/Table\";\r\n\r\nconst SEMITONES = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];\r\n\r\nconst tableStyles = css`\r\n  width: 100%;\r\n  margin: auto;\r\n  border-collapse: collapse;\r\n  white-space: nowrap;\r\n\r\n  td {\r\n    &:not(:first-child) {\r\n      font-size: 80%;\r\n    }\r\n  }\r\n\r\n  td,\r\n  th {\r\n    line-height: 32px;\r\n    text-align: center;\r\n\r\n    &:not(:first-child) {\r\n      width: 32px;\r\n      height: 32px;\r\n\r\n      display: none;\r\n      ${MediaQuery.Tablet} {\r\n        display: table-cell;\r\n      }\r\n    }\r\n\r\n    &:first-child {\r\n      text-align: left;\r\n      padding: 0 8px;\r\n    }\r\n  }\r\n\r\n  td {\r\n    //border-right: 1px solid ${(props) => props.theme?.utils?.border};\r\n    //border-bottom: 1px solid ${(props) => props.theme?.utils?.border};\r\n    &.active {\r\n      background-color: ${(props) => props.theme?.surface?.bg};\r\n    }\r\n  }\r\n\r\n  thead {\r\n    text-transform: uppercase;\r\n    font-size: 80%;\r\n\r\n    @media (max-width: ${Breakpoint.Tablet - 1}px) {\r\n      display: none;\r\n    }\r\n    tr th {\r\n      background-color: ${(props) => props.theme?.surface?.nav};\r\n      color: ${({ theme }) => theme?.text?.inverted};\r\n    }\r\n\r\n    th:first-child {\r\n      border-radius: 8px 0 0 8px;\r\n    }\r\n    th:last-child {\r\n      border-radius: 0 8px 8px 0;\r\n    }\r\n  }\r\n\r\n  a {\r\n    display: block;\r\n  }\r\n`;\r\n\r\nconst getSemitoneCol = (\r\n  pods: IPod[],\r\n  h: number,\r\n  semitones: number[],\r\n  rootNotePreset?: INotePreset\r\n) => {\r\n  const index = pods.findIndex((ivl) => ivl[0] + 1 === h);\r\n  const className = semitones.includes(h) ? \"active\" : undefined;\r\n  if (index < 0) {\r\n    return {\r\n      className,\r\n      content: \"\",\r\n    };\r\n  }\r\n  const text = rootNotePreset\r\n    ? getNoteName(addPods(rootNotePreset.pod, pods[index]))\r\n    : getIntervalName(pods[index]);\r\n  return {\r\n    className,\r\n    content: text,\r\n  };\r\n};\r\n\r\nexport interface ICollectionTableProps {\r\n  data: AnyPodListPreset[];\r\n  rootNotePreset?: INotePreset;\r\n  semitones?: number[];\r\n  presetType: PresetType;\r\n}\r\n\r\nconst CollectionTable: React.FC<ICollectionTableProps> = ({\r\n  data,\r\n  semitones = [],\r\n  rootNotePreset,\r\n  presetType,\r\n}) => {\r\n  return (\r\n    <Table\r\n      styles={tableStyles}\r\n      thead={[\r\n        {\r\n          cols: [\r\n            \"Name\",\r\n            {\r\n              colSpan: 12,\r\n              content: rootNotePreset ? \"Notes\" : \"Intervals\",\r\n            },\r\n          ],\r\n        },\r\n      ]}\r\n      tbody={data.map((d, i) => {\r\n        return {\r\n          cols: [\r\n            {\r\n              link: getModelRoute(\r\n                presetType,\r\n                d.presetId,\r\n                rootNotePreset ? (rootNotePreset.presetId as NoteId) : undefined\r\n              ),\r\n              content: getRootedName(d, rootNotePreset),\r\n            },\r\n            ...SEMITONES.map((h, i) =>\r\n              getSemitoneCol(d.pods, h, semitones, rootNotePreset)\r\n            ),\r\n          ],\r\n        };\r\n      })}\r\n    />\r\n  );\r\n};\r\n\r\nexport default CollectionTable;\r\n","import React, { PropsWithChildren } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { MediaQuery } from \"../../../styles/breakpoint\";\r\n\r\ninterface IStyledColumnManagerProps {\r\n  $tablet?: string[];\r\n  $desktop?: string[];\r\n}\r\n\r\nexport const StyledColumnManager = styled.div<IStyledColumnManagerProps>`\r\n  display: grid;\r\n  gap: 16px;\r\n  grid-template-columns: 1fr;\r\n\r\n  ${({ $tablet }) =>\r\n    $tablet\r\n      ? `\r\n        ${MediaQuery.Tablet} {\r\n            grid-template-columns: ${$tablet.join(\" \")}\r\n        }\r\n    `\r\n      : \"\"}\r\n\r\n  ${({ $desktop }) =>\r\n    $desktop\r\n      ? `\r\n        ${MediaQuery.Desktop} {\r\n            grid-template-columns: ${$desktop.join(\" \")}\r\n        }\r\n    `\r\n      : ``}\r\n`;\r\n\r\nexport interface IColumnManagerProps extends PropsWithChildren {\r\n  tablet?: string[];\r\n  desktop?: string[];\r\n}\r\n\r\nconst ColumnManager: React.FC<IColumnManagerProps> = ({\r\n  tablet,\r\n  desktop,\r\n  children,\r\n}) => {\r\n  return (\r\n    <StyledColumnManager $tablet={tablet} $desktop={desktop}>\r\n      {children}\r\n    </StyledColumnManager>\r\n  );\r\n};\r\n\r\nexport default ColumnManager;\r\n","import React, { PropsWithChildren } from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\ninterface ICardHeaderProps {\r\n  title: string;\r\n  level?: number;\r\n  action?: any;\r\n}\r\n\r\nexport const StyledCardHeader = styled.div`\r\n  margin-bottom: 16px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  justify-content: space-between;\r\n`;\r\n\r\nexport const CardHeader: React.FC<ICardHeaderProps> = ({\r\n  title,\r\n  level = 2,\r\n  action = null,\r\n}) => {\r\n  const AsTag: any = `h${level}`;\r\n  return (\r\n    <StyledCardHeader>\r\n      <AsTag>{title}</AsTag>\r\n      {action}\r\n    </StyledCardHeader>\r\n  );\r\n};\r\n\r\nexport interface ICardProps extends PropsWithChildren<any> {\r\n  title?: string;\r\n  subtitle?: string;\r\n  action?: any;\r\n  level?: number;\r\n}\r\n\r\nexport const StyledCard = styled.div`\r\n  background: ${(props) => props.theme?.surface?.card};\r\n  width: 100%;\r\n  border-radius: 16px;\r\n  padding: 16px;\r\n`;\r\n\r\nconst Card: React.FC<ICardProps> = ({\r\n  title,\r\n  subtitle,\r\n  action,\r\n  children,\r\n  level = 1,\r\n  ...rest\r\n}) => {\r\n  return (\r\n    <StyledCard {...rest}>\r\n      {title && <CardHeader title={title} action={action} level={level} />}\r\n      {subtitle && <CardHeader title={subtitle} level={level + 1} />}\r\n      {children}\r\n    </StyledCard>\r\n  );\r\n};\r\n\r\nexport default Card;\r\n","import { Link } from \"gatsby\";\r\nimport React, { Fragment, ReactNode } from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst StyledTable = styled.table``;\r\n\r\ntype TOmit = undefined | null | false;\r\n\r\nconst getIsTypeOmit = (data: any): data is TOmit =>\r\n  data === undefined || data === null || data === false;\r\n\r\n// Col\r\n\r\nexport interface IColConfig {\r\n  isHeader?: boolean;\r\n  content: any;\r\n  colSpan?: number;\r\n  className?: string;\r\n  link?: string;\r\n}\r\n\r\ninterface IColProps extends IColConfig {\r\n  index: number;\r\n}\r\n\r\ntype TCol = string | number | IColConfig | ReactNode;\r\n\r\nconst Col: React.FC<IColProps> = ({\r\n  index,\r\n  isHeader,\r\n  content,\r\n  colSpan,\r\n  className,\r\n  link,\r\n}) => {\r\n  const ColTag = isHeader ? \"th\" : \"td\";\r\n  const WrapperTag = link ? Link : Fragment;\r\n  const wrapperProps: any = link ? { to: link } : {};\r\n\r\n  return (\r\n    <ColTag colSpan={colSpan} className={className}>\r\n      <WrapperTag {...wrapperProps}>{content || \"\"}</WrapperTag>\r\n    </ColTag>\r\n  );\r\n};\r\n\r\n// Row\r\n\r\nexport interface IRowConfig {\r\n  cols: (TCol | TOmit)[];\r\n  className?: string;\r\n  isHeader?: boolean;\r\n  headerColIndicies?: number[];\r\n}\r\n\r\nconst getIsConfig = (col: TCol): col is IColConfig =>\r\n  typeof col === \"object\" && col !== null && col.hasOwnProperty(\"content\");\r\n\r\nconst Row: React.FC<IRowConfig> = ({\r\n  cols,\r\n  isHeader,\r\n  className,\r\n  headerColIndicies = [],\r\n}) => {\r\n  return (\r\n    <tr className={className}>\r\n      {cols.map((col: any, i) => {\r\n        if (getIsTypeOmit(col)) return null;\r\n        const isConfig = getIsConfig(col);\r\n        const colConfig = !isConfig ? { content: col } : col;\r\n        return (\r\n          <Col\r\n            key={i}\r\n            index={i}\r\n            isHeader={isHeader || headerColIndicies.includes(i)}\r\n            {...colConfig}\r\n          />\r\n        );\r\n      })}\r\n    </tr>\r\n  );\r\n};\r\n\r\n// Table Section\r\n\r\ninterface ITableSectionConfig {\r\n  Tag: \"thead\" | \"tfoot\" | \"tbody\";\r\n  rows: (IRowConfig | TOmit)[];\r\n  headerColIndicies?: number[];\r\n}\r\n\r\nconst TableSection: React.FC<ITableSectionConfig> = ({\r\n  Tag,\r\n  rows,\r\n  headerColIndicies,\r\n}) => (\r\n  <Tag>\r\n    {rows.map((row, i) => {\r\n      if (getIsTypeOmit(row)) return null;\r\n      return (\r\n        <Row\r\n          key={i}\r\n          isHeader={Tag !== \"tbody\"}\r\n          headerColIndicies={headerColIndicies}\r\n          {...row}\r\n        />\r\n      );\r\n    })}\r\n  </Tag>\r\n);\r\n\r\n// Table\r\n\r\ninterface IColGroup {\r\n  span?: number;\r\n  className?: string;\r\n}\r\n\r\nexport interface ITableConfig {\r\n  thead?: (IRowConfig | TOmit)[];\r\n  tfoot?: (IRowConfig | TOmit)[];\r\n  tbody: (IRowConfig | TOmit)[];\r\n  styles?: any;\r\n  caption?: string;\r\n  colGroups?: IColGroup[];\r\n  className?: string;\r\n  headerColIndicies?: number[];\r\n}\r\n\r\nexport const Table: React.FC<ITableConfig> = ({\r\n  thead,\r\n  tfoot,\r\n  tbody,\r\n  styles,\r\n  colGroups,\r\n  caption,\r\n  headerColIndicies,\r\n  className,\r\n}) => {\r\n  return (\r\n    <StyledTable css={styles} className={className}>\r\n      {colGroups && (\r\n        <colgroup>\r\n          {colGroups.map((cg, i) => (\r\n            <col key={i} {...cg} />\r\n          ))}\r\n        </colgroup>\r\n      )}\r\n      {caption && <caption>{caption}</caption>}\r\n      {thead && (\r\n        <TableSection\r\n          Tag=\"thead\"\r\n          rows={thead}\r\n          headerColIndicies={headerColIndicies}\r\n        />\r\n      )}\r\n      {tfoot && (\r\n        <TableSection\r\n          Tag=\"tfoot\"\r\n          rows={tfoot}\r\n          headerColIndicies={headerColIndicies}\r\n        />\r\n      )}\r\n      {tbody && (\r\n        <TableSection\r\n          Tag=\"tbody\"\r\n          rows={tbody}\r\n          headerColIndicies={headerColIndicies}\r\n        />\r\n      )}\r\n    </StyledTable>\r\n  );\r\n};\r\n","const BASE_NOTE_INDEX = 9;\r\nconst BASE_PITCH = 440;\r\n\r\nexport const getFrequency = (p: number): number => {\r\n  const delta = p - BASE_NOTE_INDEX;\r\n  const exp = delta / 12;\r\n  const multiplier = Math.pow(2, exp);\r\n  const f = BASE_PITCH * multiplier;\r\n  return Math.round(f);\r\n};\r\n\r\n// const getFrequencies = pitches => {\r\n//     return pitches.map(p => getFrequency(p[0]));\r\n// }\r\n\r\n// const CALIBRATION_NOTE = {\r\n//     frequency: 440,\r\n//     noteIndex: 9\r\n// };\r\n\r\n// const CALIBRATION_CONSTANT = Math.pow(2, 1 / 12);\r\n\r\n// export const TUNING_FN = {\r\n// \tTET: {\r\n// \t\tid: 'TET',\r\n// \t\tname: 'TET',\r\n// \t\tvalue: (pod: IPod): number | null => {\r\n// \t\t\tif (!pod) return null;\r\n// \t\t\tconst [p, d] = pod;\r\n// \t\t\tconst a = p + 3;\r\n// \t\t\tconst b = a / 12;\r\n// \t\t\tconst c = Math.pow(2, b);\r\n// \t\t\tconst f = 440 * c;\r\n// \t\t\treturn Math.round(f);\r\n// \t\t}\r\n// \t}\r\n// };\r\n\r\n// Sound\r\n\r\n// static playSound = (note: IPod): void => {\r\n//     const frequency = TuningUtils.getFrequency(note[0]);\r\n//     ToneUtils.playSound(frequency)\r\n// }\r\n\r\n// static playSoundList = (notes: IPod[]): void => {\r\n//     const frequencies = notes.map(n => TuningUtils.getFrequency(n[0]));\r\n//     ToneUtils.playSound(frequencies)\r\n// }\r\n","import ArrayUtils from \"./primitives/Array.utils\";\r\nimport { IPreset, PresetMap } from \"./Core.constants\";\r\n\r\nexport enum IntervalQualityId {\r\n  Diminished = \"diminished\",\r\n  Minor = \"minor\",\r\n  Perfect = \"perfect\",\r\n  Major = \"major\",\r\n  Augmented = \"augmented\",\r\n}\r\n\r\nexport interface IIntervalQualityPreset extends IPreset<IntervalQualityId> {\r\n  symbol: string;\r\n  down?: IntervalQualityId;\r\n  up?: IntervalQualityId;\r\n}\r\n\r\nexport const INTERVAL_QUALITY_PRESET_MAP: PresetMap<\r\n  IntervalQualityId,\r\n  IIntervalQualityPreset\r\n> = new Map([\r\n  [\r\n    IntervalQualityId.Diminished,\r\n    {\r\n      presetId: IntervalQualityId.Diminished,\r\n      name: \"Diminished\",\r\n      symbol: \"d\",\r\n      down: undefined,\r\n      up: IntervalQualityId.Minor,\r\n    },\r\n  ],\r\n  [\r\n    IntervalQualityId.Minor,\r\n    {\r\n      presetId: IntervalQualityId.Minor,\r\n      name: \"Minor\",\r\n      symbol: \"m\",\r\n      down: IntervalQualityId.Diminished,\r\n      up: IntervalQualityId.Major,\r\n    },\r\n  ],\r\n  [\r\n    IntervalQualityId.Perfect,\r\n    {\r\n      presetId: IntervalQualityId.Perfect,\r\n      name: \"Perfect\",\r\n      symbol: \"P\",\r\n      down: IntervalQualityId.Diminished,\r\n      up: IntervalQualityId.Augmented,\r\n    },\r\n  ],\r\n  [\r\n    IntervalQualityId.Major,\r\n    {\r\n      presetId: IntervalQualityId.Major,\r\n      name: \"Major\",\r\n      symbol: \"M\",\r\n      down: IntervalQualityId.Minor,\r\n      up: IntervalQualityId.Augmented,\r\n    },\r\n  ],\r\n  [\r\n    IntervalQualityId.Augmented,\r\n    {\r\n      presetId: IntervalQualityId.Augmented,\r\n      name: \"Augmented\",\r\n      symbol: \"A\",\r\n      down: IntervalQualityId.Major,\r\n      up: undefined,\r\n    },\r\n  ],\r\n]);\r\n\r\nexport const INTERVAL_QUALITY_PRESETS = ArrayUtils.mapToArray(\r\n  INTERVAL_QUALITY_PRESET_MAP\r\n);\r\n","import { getFrequency } from \"./Frequency.utils\";\r\nimport {\r\n  CORE_INTERVALS,\r\n  IIntervalPreset,\r\n  INTERVAL_PRESET_MAP,\r\n  IntervalId,\r\n  getExtensionInversionId,\r\n} from \"./Interval.constants\";\r\nimport {\r\n  IIntervalQualityPreset,\r\n  INTERVAL_QUALITY_PRESET_MAP,\r\n  IntervalQualityId,\r\n} from \"./IntervalQuality.constants\";\r\nimport { IPod, MAX_POD } from \"./Pod.constants\";\r\nimport { reducePod } from \"./Pod.utils\";\r\n\r\nconst getIsExtended = (pod: IPod): boolean => {\r\n  return pod[0] > MAX_POD[0] || pod[1] > MAX_POD[1];\r\n};\r\n\r\nexport const getName = (pod: IPod) => {\r\n  const reduced = reducePod(pod);\r\n\r\n  const [noteIndex, d] = reduced;\r\n  const degreeIntervals = CORE_INTERVALS[d] as IIntervalPreset[];\r\n  if (!degreeIntervals) return \"?\";\r\n\r\n  const pIvl = degreeIntervals[0];\r\n  const loIvl = pIvl;\r\n  const hiIvl = degreeIntervals[degreeIntervals.length - 1];\r\n\r\n  // determine core interval and quality\r\n  let ivl: IIntervalPreset | undefined;\r\n  let quality: IIntervalQualityPreset | undefined;\r\n  if (degreeIntervals.length === 1) {\r\n    ivl = pIvl; // perfect\r\n    quality = INTERVAL_QUALITY_PRESET_MAP.get(\r\n      IntervalQualityId.Perfect\r\n    ) as IIntervalQualityPreset;\r\n  } else if (noteIndex <= loIvl.pod[0]) {\r\n    ivl = loIvl; // minor\r\n    quality = INTERVAL_QUALITY_PRESET_MAP.get(\r\n      IntervalQualityId.Minor\r\n    ) as IIntervalQualityPreset;\r\n  } else if (noteIndex >= hiIvl.pod[0]) {\r\n    ivl = hiIvl; // major\r\n    quality = INTERVAL_QUALITY_PRESET_MAP.get(\r\n      IntervalQualityId.Major\r\n    ) as IIntervalQualityPreset;\r\n  }\r\n\r\n  const offset = (ivl as IIntervalPreset).pod[0] - reduced[0];\r\n\r\n  if (offset === 0)\r\n    return `${(quality as IIntervalQualityPreset).symbol}${d + 1}`;\r\n  else if (offset > 0)\r\n    quality = INTERVAL_QUALITY_PRESET_MAP.get(\r\n      IntervalQualityId.Diminished\r\n    ) as IIntervalQualityPreset;\r\n  // dim\r\n  else if (offset < 0)\r\n    quality = INTERVAL_QUALITY_PRESET_MAP.get(\r\n      IntervalQualityId.Augmented\r\n    ) as IIntervalQualityPreset; // aug\r\n\r\n  const count = Math.abs(offset);\r\n  const qualityStr = (quality as IIntervalQualityPreset).symbol.repeat(count);\r\n\r\n  let value = `${qualityStr}${d + 1}`;\r\n\r\n  const isExtended = getIsExtended(pod);\r\n\r\n  if (isExtended) {\r\n    value = getExtensionInversionId(value as IntervalId);\r\n  }\r\n\r\n  return value;\r\n};\r\n\r\nexport const getNameFromId = (presetId: IntervalId) => {\r\n  return (INTERVAL_PRESET_MAP.get(presetId) as IIntervalPreset).name || \"\";\r\n};\r\n\r\nexport const getRatio = (pod: IPod) => {\r\n  const [p] = pod;\r\n\r\n  const baseline = getFrequency(0);\r\n  const compareTo = getFrequency(p);\r\n\r\n  const ratio = compareTo / baseline;\r\n\r\n  return `1:${ratio.toFixed(2)}`;\r\n};\r\n","import ArrayUtils from \"./primitives/Array.utils\";\r\nimport { IPreset, PresetMap } from \"./Core.constants\";\r\n\r\nexport enum AccidentalId {\r\n  DoubleFlat = \"double-flat\",\r\n  Flat = \"flat\",\r\n  Natural = \"natural\",\r\n  Sharp = \"sharp\",\r\n  DoubleSharp = \"double-sharp\",\r\n}\r\n\r\nexport interface IAccidentalPreset extends IPreset<AccidentalId> {\r\n  symbol: string;\r\n  offset: number;\r\n}\r\n\r\nexport const ACCIDENTAL_PRESET_MAP: PresetMap<AccidentalId, IAccidentalPreset> =\r\n  new Map([\r\n    [\r\n      AccidentalId.DoubleFlat,\r\n      {\r\n        presetId: AccidentalId.DoubleFlat,\r\n        name: \"Double Flat\",\r\n        symbol: \"bb\",\r\n        offset: -2,\r\n      },\r\n    ],\r\n    [\r\n      AccidentalId.Flat,\r\n      {\r\n        presetId: AccidentalId.Flat,\r\n        name: \"Flat\",\r\n        symbol: \"b\",\r\n        offset: -1,\r\n      },\r\n    ],\r\n    [\r\n      AccidentalId.Natural,\r\n      {\r\n        presetId: AccidentalId.Natural,\r\n        name: \"Natural\",\r\n        symbol: \"â™®\",\r\n        offset: 0,\r\n      },\r\n    ],\r\n    [\r\n      AccidentalId.Sharp,\r\n      {\r\n        presetId: AccidentalId.Sharp,\r\n        name: \"Sharp\",\r\n        symbol: \"#\",\r\n        offset: 1,\r\n      },\r\n    ],\r\n    [\r\n      AccidentalId.DoubleSharp,\r\n      {\r\n        presetId: AccidentalId.DoubleSharp,\r\n        name: \"Double Sharp\",\r\n        symbol: \"##\",\r\n        offset: 2,\r\n      },\r\n    ],\r\n  ]);\r\n\r\nexport const ACCIDENTAL_PRESETS = ArrayUtils.mapToArray(ACCIDENTAL_PRESET_MAP);\r\n","import { PresetMap } from \"./Core.constants\";\r\nimport { ROOT_DEGREE } from \"./Degree.constants\";\r\nimport { ROOT_PITCH } from \"./Pitch.constants\";\r\nimport { IPodPreset } from \"./Pod.constants\";\r\nimport ArrayUtils from \"./primitives/Array.utils\";\r\n\r\nexport enum DiatonicId {\r\n  Tonic = \"tonic\",\r\n  Supertonic = \"supertonic\",\r\n  Mediant = \"mediant\",\r\n  Subdominant = \"subdominant\",\r\n  Dominant = \"dominant\",\r\n  Submediant = \"submediant\",\r\n  Subtonic = \"subtonic\",\r\n}\r\n\r\nexport interface IDiatonicPreset extends IPodPreset<DiatonicId> {}\r\n\r\nexport const DIATONIC_PRESET_MAP: PresetMap<DiatonicId, IDiatonicPreset> =\r\n  new Map([\r\n    [\r\n      DiatonicId.Tonic,\r\n      {\r\n        presetId: DiatonicId.Tonic,\r\n        name: \"Tonic\",\r\n        pod: [0, 0],\r\n      },\r\n    ],\r\n    [\r\n      DiatonicId.Supertonic,\r\n      {\r\n        presetId: DiatonicId.Supertonic,\r\n        name: \"Supertonic\",\r\n        pod: [2, 1],\r\n      },\r\n    ],\r\n    [\r\n      DiatonicId.Mediant,\r\n      {\r\n        presetId: DiatonicId.Mediant,\r\n        name: \"Mediant\",\r\n        pod: [4, 2],\r\n      },\r\n    ],\r\n    [\r\n      DiatonicId.Subdominant,\r\n      {\r\n        presetId: DiatonicId.Subdominant,\r\n        name: \"Subdominant\",\r\n        pod: [5, 3],\r\n      },\r\n    ],\r\n    [\r\n      DiatonicId.Dominant,\r\n      {\r\n        presetId: DiatonicId.Dominant,\r\n        name: \"Dominant\",\r\n        pod: [7, 4],\r\n      },\r\n    ],\r\n    [\r\n      DiatonicId.Submediant,\r\n      {\r\n        presetId: DiatonicId.Submediant,\r\n        name: \"Submediant\",\r\n        pod: [9, 5],\r\n      },\r\n    ],\r\n    [\r\n      DiatonicId.Subtonic,\r\n      {\r\n        presetId: DiatonicId.Subtonic,\r\n        name: \"Subtonic\",\r\n        pod: [11, 6],\r\n      },\r\n    ],\r\n  ]);\r\n\r\nexport const DIATONIC_PRESETS = ArrayUtils.mapToArray(DIATONIC_PRESET_MAP);\r\n\r\nexport const ROOT_SCALE = DIATONIC_PRESETS.map((preset, i) => [\r\n  ROOT_PITCH + preset.pod[0],\r\n  ROOT_DEGREE + preset.pod[1],\r\n]);\r\n","import {\r\n  AccidentalId,\r\n  ACCIDENTAL_PRESET_MAP,\r\n  IAccidentalPreset,\r\n} from \"./Accidental.constants\";\r\nimport { DegreeId, DEGREE_PRESETS } from \"./Degree.constants\";\r\nimport { ROOT_SCALE } from \"./Diatonic.constants\";\r\nimport { getFrequency as getFrequencyFromPitch } from \"./Frequency.utils\";\r\nimport {\r\n  INotePreset,\r\n  NoteId,\r\n  NOTE_PRESETS,\r\n  NOTE_PRESET_MAP,\r\n} from \"./Note.constants\";\r\nimport { IPod, MAX_POD } from \"./Pod.constants\";\r\nimport { arePodsEqual, getDegree, reducePod } from \"./Pod.utils\";\r\nimport NumberUtils from \"./primitives/Number.utils\";\r\n\r\ninterface INoteNameOptions {\r\n  includeOctave?: boolean;\r\n}\r\n\r\ninterface INoteNameParts {\r\n  spelling: string;\r\n  accidental: string;\r\n  octave: number;\r\n}\r\n\r\nexport const getNoteFromPod = (pod: IPod) => {\r\n  return NOTE_PRESETS.find((note) => arePodsEqual(note.pod, pod));\r\n};\r\n\r\nexport const getNoteWithOctave = (noteId: NoteId, octave: number): IPod => {\r\n  const notePreset = NOTE_PRESET_MAP.get(noteId) as INotePreset;\r\n  return [\r\n    (octave - 4) * 12 + NumberUtils.modulo(notePreset.pod[0], 12),\r\n    notePreset.pod[1],\r\n  ];\r\n};\r\n\r\n// export const  fromId = (presetId: string, octave = 4) => {\r\n//   let sharps = (presetId.match(/-sharp/g) || []).length;\r\n//   let flats = (presetId.match(/-flat/g) || []).length;\r\n//   const nativeNoteId = presetId.slice(0, 1) as NoteId;\r\n//   const nativePod = (NOTE_PRESET_MAP.get(nativeNoteId) as IModelConfig).value;\r\n//   const octaveBasePitch =\r\n//     typeof octave === \"undefined\" ? 0 : (octave - 4) * 12;\r\n//   const pitch = octaveBasePitch + nativePod[0] + sharps - flats;\r\n//   const pod = [pitch, nativePod[1]] as IPod;\r\n//   //const pod = [NumberUtils.modulo(nativePod[0] + sharps - flats, 12), nativePod[1]] as IPod;\r\n//   const note = new Note(pod);\r\n//   note.modelType = ModelType.Pod;\r\n//   note.presetType = PresetType.Note;\r\n//   note.presetId = presetId as any;\r\n//   note.name = getName();\r\n//   note.pod = pod as IPod;\r\n//   // @ts-ignore TODO\r\n//   note.value = note.pod;\r\n//   return note;\r\n// };\r\n\r\nexport const getAccidentalOffset = (pod: IPod): number => {\r\n  const [p, d] = reducePod(pod);\r\n\r\n  let offset = p - ROOT_SCALE[d][0];\r\n\r\n  // If offset spans more than half an octave, it's going the wrong way\r\n  // TODO need to formally confirm this\r\n  if (offset > 5) offset = offset - 12;\r\n  if (offset < -5) offset = offset + 12;\r\n\r\n  // Examples\r\n  // if (d === 0 && offset === 11) offset = offset - 12;\r\n  // if (d === 0 && offset === 10) offset = offset - 12;\r\n  // if (d === 0 && offset === 9) offset = offset - 12;\r\n  // if (d === 1 && offset === 9) offset = offset - 12;\r\n  // if (d === 1 && offset === 8) offset = offset - 12;\r\n  // if (d === 5 && offset === -9) offset = offset + 12;\r\n  // if (d === 6 && offset === -11) offset = offset + 12;\r\n  // if (d === 6 && offset === -10) offset = offset + 12;\r\n  // if (d === 6 && offset === -9) offset = offset + 12;\r\n  //console.log(`${p} - ${ROOT_SCALE[d][0]} = ${offset}, d = ${d}`);\r\n\r\n  return offset;\r\n};\r\n\r\nexport const getAccidentalString = (pod: IPod): string => {\r\n  const offset = getAccidentalOffset(pod);\r\n  if (offset > 0) {\r\n    return (\r\n      ACCIDENTAL_PRESET_MAP.get(AccidentalId.Sharp) as IAccidentalPreset\r\n    ).symbol.repeat(offset);\r\n  } else if (offset < 0) {\r\n    return (\r\n      ACCIDENTAL_PRESET_MAP.get(AccidentalId.Flat) as IAccidentalPreset\r\n    ).symbol.repeat(-offset);\r\n  }\r\n  return \"\";\r\n};\r\n\r\nexport const getPitch = (pod: IPod): number => {\r\n  return pod[0];\r\n};\r\n\r\nexport const getPitchClass = (pod: IPod): number => {\r\n  return NumberUtils.modulo(getPitch(pod), MAX_POD[0]);\r\n};\r\n\r\nexport const getOctave = (pod: IPod): number => {\r\n  const midi = true;\r\n  const raw = Math.floor(getPitch(pod) / 12);\r\n  return midi ? raw + 4 : raw;\r\n};\r\n\r\nexport const getDegreeId = (pod: IPod): DegreeId => {\r\n  const degree = getDegree(pod);\r\n  return DEGREE_PRESETS[degree].presetId;\r\n};\r\n\r\nexport const getSpelling = (pod: IPod): string => {\r\n  return getDegreeId(pod);\r\n};\r\n\r\nexport const getNameParts = (pod: IPod): INoteNameParts => {\r\n  const spelling = getSpelling(pod);\r\n  const accidental = getAccidentalString(pod);\r\n  const octave = getOctave(pod);\r\n  return { spelling, accidental, octave };\r\n};\r\n\r\nexport const getName = (pod: IPod, options: INoteNameOptions = {}): string => {\r\n  const { spelling, accidental, octave } = getNameParts(pod);\r\n\r\n  const o = options.includeOctave ? octave : \"\";\r\n  return `${spelling}${accidental}${o}`;\r\n};\r\n\r\nexport const getFrequency = (pod: IPod, format = false) => {\r\n  const f = getFrequencyFromPitch(getPitch(pod));\r\n  return format ? `${f.toFixed(0)} Hz` : f;\r\n};\r\n","import { CHORD_PRESETS } from \"./Chord.constants\";\r\nimport { AnyPodListPreset } from \"./Core.derived\";\r\nimport { INotePreset } from \"./Note.constants\";\r\nimport { IPod, MAX_POD } from \"./Pod.constants\";\r\nimport NumberUtils from \"./primitives/Number.utils\";\r\nimport { SCALE_PRESETS } from \"./Scale.constants\";\r\n\r\n// Search\r\n\r\nconst isPodAtPitch = (\r\n  pod: IPod,\r\n  p: number,\r\n  matchOctave = false\r\n): IPod | null => {\r\n  const pitchOffset = 0;\r\n  const target = p - pitchOffset;\r\n  let a = pod[0];\r\n  let b = target;\r\n  if (!matchOctave) {\r\n    a = NumberUtils.modulo(a, 12);\r\n    b = NumberUtils.modulo(b, 12);\r\n  }\r\n  return a === b ? pod : null;\r\n};\r\n\r\nexport const getIndexOfPodAtPitch = (\r\n  A: IPod[],\r\n  p: number,\r\n  matchOctave: boolean\r\n): number | null => {\r\n  const pod = A.findIndex((a) => isPodAtPitch(a, p, matchOctave));\r\n  return pod !== -1 ? pod : null;\r\n};\r\n\r\n/*static sort = (podList: IPod[]) => {\r\n    return podList.sort((a, b) => {\r\n        if (a[0] < b[0]) return -1;\r\n        else if (a[0] > b[0]) return 1;\r\n        else {\r\n            if (a[1] < b[1]) return -1;\r\n            else if (a[1] > b[1]) return 1;\r\n            else return 0;\r\n        }\r\n    });\r\n}*/\r\n\r\nexport const addPods = (a: IPod, b: IPod): IPod => {\r\n  const p = a[0] + b[0];\r\n  const d = a[1] + b[1];\r\n  const result: IPod = [p, d];\r\n  return result;\r\n};\r\n\r\nexport const subtractPods = (a: IPod, b: IPod): IPod => {\r\n  const p = a[0] - b[0];\r\n  const d = a[1] - b[1];\r\n  const result: IPod = [p, d];\r\n  return result;\r\n};\r\n\r\nexport const addPodList = (a: IPod, B: IPod[]): IPod[] => {\r\n  const result = B.map((b) => addPods(a, b));\r\n  return result;\r\n};\r\n\r\nexport const reducePod = (a: IPod, max = MAX_POD): IPod => {\r\n  const p = NumberUtils.modulo(a[0], max[0]);\r\n  const d = NumberUtils.modulo(a[1], max[1]);\r\n  return [p, d];\r\n};\r\n\r\nexport const arePodsEqual = (a: IPod, b: IPod): boolean => {\r\n  if (!a || !b || a.length !== 2 || b.length !== 2) return false;\r\n  return a[0] === b[0] && a[1] === b[1];\r\n};\r\n\r\nexport const reducePodList = (A: IPod[]): IPod[] => {\r\n  return A.map((a) => reducePod(a));\r\n};\r\n\r\nexport const arePodListsEqual = (A: IPod[], B: IPod[]): boolean => {\r\n  if (!A || !B || A.length !== B.length) return false;\r\n  for (let i = 0; i < A.length; i++) {\r\n    const a = A[i];\r\n    const b = B[i];\r\n    if (!arePodsEqual(a, b)) return false;\r\n  }\r\n  return true;\r\n};\r\n\r\nexport const listContainsSubset = (\r\n  podList: IPod[],\r\n  subset: IPod[]\r\n): boolean => {\r\n  for (let i = 0; i < subset.length; i++) {\r\n    if (!podList.find((x) => x[0] === subset[i][0] && x[1] === subset[i][1]))\r\n      return false;\r\n  }\r\n  return true;\r\n};\r\n\r\nexport const getDegree = (pod: IPod) => {\r\n  return NumberUtils.modulo(pod[1], MAX_POD[1]);\r\n};\r\n\r\nexport const getShortName = (str) =>\r\n  str\r\n    .replace(\"Major\", \"Maj\")\r\n    .replace(\"Minor\", \"Min\")\r\n    .replace(\"Augmented\", \"Aug\")\r\n    .replace(\"Diminished\", \"Dim\")\r\n    .replace(\"Suspended\", \"Sus\")\r\n    .replace(\"Dominant\", \"Dom\")\r\n    .replace(\"Pentatonic\", \"Pent\")\r\n    .replace(\"st\", \"\")\r\n    .replace(\"nd\", \"\")\r\n    .replace(\"rd\", \"\")\r\n    .replace(\"th\", \"\");\r\n\r\nexport const getRootedName = (\r\n  podListPreset: AnyPodListPreset,\r\n  rootNotePreset?: INotePreset\r\n) => {\r\n  return `${rootNotePreset ? `${rootNotePreset.name} ` : \"\"}${\r\n    podListPreset.name\r\n  }`;\r\n};\r\n\r\nexport const isInSuperset = (intervalPods: IPod[], superset: IPod[]) => {\r\n  if (superset.length <= intervalPods.length) return false;\r\n  return listContainsSubset(superset, intervalPods);\r\n};\r\n\r\nexport const containsSubset = (intervalPods: IPod[], subset: IPod[]) => {\r\n  if (subset.length >= intervalPods.length) return false;\r\n  return listContainsSubset(intervalPods, subset);\r\n};\r\n\r\nexport const getSubchords = (intervalPods: IPod[]) => {\r\n  return CHORD_PRESETS.filter((preset) =>\r\n    containsSubset(intervalPods, preset.pods)\r\n  );\r\n};\r\n\r\nexport const getSuperchords = (intervalPods: IPod[]) => {\r\n  return CHORD_PRESETS.filter((preset) =>\r\n    isInSuperset(intervalPods, preset.pods)\r\n  );\r\n};\r\n\r\nexport const getSubscales = (intervalPods: IPod[]) => {\r\n  return SCALE_PRESETS.filter((preset) =>\r\n    containsSubset(intervalPods, preset.pods)\r\n  );\r\n};\r\n\r\nexport const getSuperscales = (intervalPods: IPod[]) => {\r\n  return SCALE_PRESETS.filter((preset) =>\r\n    isInSuperset(intervalPods, preset.pods)\r\n  );\r\n};\r\n\r\nexport const getAllRelated = (intervalPods: IPod[]) => {\r\n  return [\r\n    ...getSubchords(intervalPods),\r\n    ...getSubscales(intervalPods),\r\n    ...getSuperchords(intervalPods),\r\n    ...getSuperscales(intervalPods),\r\n  ];\r\n};\r\n\r\n// applyRoot(root: IPod) {\r\n//   let notePods;\r\n//   try {\r\n//     notePods = this.intervalPods.map((ivl) => addPods(root, ivl));\r\n//   } catch (e) {\r\n//     console.error(e);\r\n//     throw new Error(\"Unable to apply root\");\r\n//   }\r\n//   this.root = root;\r\n//   this.notePods = notePods;\r\n//   this.name = `${\"ROOT\"} ${this.name}`;\r\n//   return this;\r\n// }\r\n\r\nexport const tryGetPodPairAtPitch = (\r\n  intervalPods: IPod[],\r\n  notePods: IPod[],\r\n  noteIndex: number\r\n): [IPod, IPod] | [undefined, undefined] => {\r\n  if (!notePods) return [undefined, undefined];\r\n\r\n  const index = getIndexOfPodAtPitch(notePods, noteIndex, false);\r\n\r\n  if (index == null) return [undefined, undefined];\r\n\r\n  return [intervalPods[index], (notePods as IPod[])[index]];\r\n};\r\n\r\nexport const getNotePods = (\r\n  rootPod: IPod,\r\n  intervalPods: IPod[],\r\n  octave = 4\r\n): IPod[] => {\r\n  const notePods = intervalPods.map((ivl) => {\r\n    const notePod = addPods(rootPod, ivl);\r\n    return [\r\n      (octave - 4) * 12 + NumberUtils.modulo(notePod[0], 12),\r\n      notePod[1],\r\n    ] as IPod;\r\n  });\r\n  return notePods;\r\n};\r\n","const ROMAN_NUMERAL = {\r\n\tM: 1000,\r\n\tCM: 900,\r\n\tD: 500,\r\n\tCD: 400,\r\n\tC: 100,\r\n\tXC: 90,\r\n\tL: 50,\r\n\tXL: 40,\r\n\tX: 10,\r\n\tIX: 9,\r\n\tV: 5,\r\n\tIV: 4,\r\n\tI: 1\r\n} as const;\r\n\r\nconst modulo = (a: number, b: number): number => {\r\n\treturn ((a % b) + b) % b;\r\n}\r\n\r\nconst moduloSum = (a: number, b: number, divisor: number): number => {\r\n\tconst offset = 0;\r\n\tconst subtraction = false;\r\n\tconst dividend = (subtraction) ? ((a - offset) - (b - offset)) : ((a - offset) + (b - offset));\r\n\treturn modulo(dividend, divisor) + offset;\r\n};\r\n\r\nconst romanize = (n: number): string => {\r\n\tlet str = '';\r\n\tfor (const i of Object.keys(ROMAN_NUMERAL)) {\r\n\t\tvar q = Math.floor(n / ROMAN_NUMERAL[i]);\r\n\t\tn -= q * ROMAN_NUMERAL[i];\r\n\t\tstr += i.repeat(q);\r\n\t\tif (n === 0) return str;\r\n\t}\r\n\treturn str;\r\n}\r\n\r\nexport default {\r\n\tmodulo,\r\n\tmoduloSum,\r\n\tromanize\r\n};\r\n"],"names":["SEMITONES","tableStyles","css","MediaQuery","props","theme","_props$theme","surface","_props$theme$surface","bg","Breakpoint","_props$theme2","_props$theme2$surface","nav","_ref","text","_theme$text","inverted","_ref2","data","semitones","rootNotePreset","presetType","React","Table","styles","thead","cols","colSpan","content","tbody","map","d","i","link","getModelRoute","presetId","undefined","getRootedName","h","pods","index","findIndex","ivl","className","includes","getNoteName","addPods","pod","getIntervalName","getSemitoneCol","StyledColumnManager","styled","$tablet","join","$desktop","_ref3","tablet","desktop","children","StyledCardHeader","CardHeader","title","level","action","AsTag","StyledCard","card","subtitle","rest","StyledTable","getIsTypeOmit","Col","isHeader","ColTag","WrapperTag","Link","Fragment","wrapperProps","to","Row","headerColIndicies","col","isConfig","hasOwnProperty","getIsConfig","colConfig","key","TableSection","Tag","rows","row","_ref4","tfoot","colGroups","caption","cg","getFrequency","p","exp","f","Math","pow","round","IntervalQualityId","INTERVAL_QUALITY_PRESET_MAP","Map","Diminished","name","symbol","down","up","Minor","Major","Perfect","Augmented","ArrayUtils","getName","reduced","reducePod","noteIndex","degreeIntervals","CORE_INTERVALS","pIvl","loIvl","hiIvl","length","quality","get","offset","count","abs","value","repeat","isExtended","MAX_POD","getIsExtended","getExtensionInversionId","getRatio","baseline","toFixed","AccidentalId","ACCIDENTAL_PRESET_MAP","DoubleFlat","Flat","Natural","Sharp","DoubleSharp","DiatonicId","DIATONIC_PRESET_MAP","Tonic","Supertonic","Mediant","Subdominant","Dominant","Submediant","Subtonic","ROOT_SCALE","preset","ROOT_PITCH","ROOT_DEGREE","getNoteFromPod","NOTE_PRESETS","note","arePodsEqual","getNoteWithOctave","noteId","octave","notePreset","NOTE_PRESET_MAP","NumberUtils","getAccidentalString","getAccidentalOffset","getPitch","getPitchClass","getSpelling","degree","getDegree","DEGREE_PRESETS","getDegreeId","getNameParts","spelling","accidental","raw","floor","getOctave","options","includeOctave","format","getFrequencyFromPitch","getIndexOfPodAtPitch","A","matchOctave","a","target","b","isPodAtPitch","subtractPods","max","arePodListsEqual","B","listContainsSubset","podList","subset","find","x","getShortName","str","replace","podListPreset","isInSuperset","intervalPods","superset","containsSubset","getSubchords","CHORD_PRESETS","getSuperchords","getSubscales","SCALE_PRESETS","getSuperscales","tryGetPodPairAtPitch","notePods","getNotePods","rootPod","notePod","ROMAN_NUMERAL","M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I","modulo","moduloSum","divisor","romanize","n","Object","keys","q"],"sourceRoot":""}